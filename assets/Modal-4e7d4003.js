import{r as m,c as U,R as D}from"./index-9fa1aa67.js";import{B as Be}from"./Button-9c3a5d19.js";import{f as he,F as oe}from"./Frame-8a2a37ef.js";import{T as me}from"./TitleBar-83565a4b.js";import{c as ye}from"./createRuntimeFn-62c9670f.esm-edc6fb2c.js";import{c as ve}from"./index-923230fa.js";let Te=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var ne={dragStart:!0},Me=(e,t={})=>{let r,a,{bounds:l,axis:o="both",gpuAcceleration:d=!0,legacyTranslate:g=!0,transform:B,applyUserSelectHack:R=!0,disabled:S=!1,ignoreMultitouch:x=!1,recomputeBounds:h=ne,grid:O,position:p,cancel:b,handle:T,defaultClass:v="neodrag",defaultClassDragging:u="neodrag-dragging",defaultClassDragged:i="neodrag-dragged",defaultPosition:q={x:0,y:0},onDragStart:I,onDrag:we,onDragEnd:Ee}=t,W=!1,L=0,N=0,V=0,_=0,G=0,J=0,{x:$,y:F}=p?{x:(p==null?void 0:p.x)??0,y:(p==null?void 0:p.y)??0}:q;Z($,F);let M,j,H,K,se,le="",be=!!p;h={...ne,...h};let P=new Set;const Q=document.body.style,A=e.classList;function Z(n=L,c=N){if(!B){if(g){let y=`${+n}px, ${+c}px`;return X(e,"transform",d?`translate3d(${y}, 0)`:`translate(${y})`)}return X(e,"translate",`${+n}px ${+c}px ${d?"1px":""}`)}const f=B({offsetX:n,offsetY:c,rootNode:e});re(f)&&X(e,"transform",f)}const ee=(n,c)=>{const f={offsetX:L,offsetY:N,rootNode:e,currentNode:se};e.dispatchEvent(new CustomEvent(n,{detail:f})),c==null||c(f)},te=addEventListener;te("pointerdown",ce,!1),te("pointerup",de,!1),te("pointermove",fe,!1),X(e,"touch-action","none");const ue=()=>{let n=e.offsetWidth/j.width;return isNaN(n)&&(n=1),n};function ce(n){if(S||n.button===2)return;if(P.add(n.pointerId),x&&P.size>1)return n.preventDefault();if(h.dragStart&&(M=ae(l,e)),re(T)&&re(b)&&T===b)throw new Error("`handle` selector can't be same as `cancel` selector");if(A.add(v),H=function(s,E){if(!s)return[E];if(ie(s))return[s];if(Array.isArray(s))return s;const C=E.querySelectorAll(s);if(C===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(C.values())}(T,e),K=function(s,E){if(!s)return[];if(ie(s))return[s];if(Array.isArray(s))return s;const C=E.querySelectorAll(s);if(C===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(C.values())}(b,e),r=/(both|x)/.test(o),a=/(both|y)/.test(o),ge(K,H))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const c=n.composedPath()[0];if(!H.some(s=>{var E;return s.contains(c)||((E=s.shadowRoot)==null?void 0:E.contains(c))})||ge(K,[c]))return;se=H.length===1?e:H.find(s=>s.contains(c)),W=!0,j=e.getBoundingClientRect(),R&&(le=Q.userSelect,Q.userSelect="none"),ee("neodrag:start",I);const{clientX:f,clientY:y}=n,w=ue();r&&(V=f-$/w),a&&(_=y-F/w),M&&(G=f-j.left,J=y-j.top)}function de(n){P.delete(n.pointerId),W&&(h.dragEnd&&(M=ae(l,e)),A.remove(u),A.add(i),R&&(Q.userSelect=le),ee("neodrag:end",Ee),r&&(V=L),a&&(_=N),W=!1)}function fe(n){if(!W||x&&P.size>1)return;h.drag&&(M=ae(l,e)),A.add(u),n.preventDefault(),j=e.getBoundingClientRect();let c=n.clientX,f=n.clientY;const y=ue();if(M){const w={left:M.left+G,top:M.top+J,right:M.right+G-j.width,bottom:M.bottom+J-j.height};c=pe(c,w.left,w.right),f=pe(f,w.top,w.bottom)}if(Array.isArray(O)){let[w,s]=O;if(isNaN(+w)||w<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+s)||s<0)throw new Error("2nd argument of `grid` must be a valid positive number");let E=c-V,C=f-_;[E,C]=Ce([w/y,s/y],E,C),c=V+E,f=_+C}r&&(L=Math.round((c-V)*y)),a&&(N=Math.round((f-_)*y)),$=L,F=N,ee("neodrag",we),Z()}return{destroy:()=>{const n=removeEventListener;n("pointerdown",ce,!1),n("pointerup",de,!1),n("pointermove",fe,!1)},update:n=>{var f,y;o=n.axis||"both",S=n.disabled??!1,x=n.ignoreMultitouch??!1,T=n.handle,l=n.bounds,h=n.recomputeBounds??ne,b=n.cancel,R=n.applyUserSelectHack??!0,O=n.grid,d=n.gpuAcceleration??!0,g=n.legacyTranslate??!0,B=n.transform;const c=A.contains(i);A.remove(v,i),v=n.defaultClass??"neodrag",u=n.defaultClassDragging??"neodrag-dragging",i=n.defaultClassDragged??"neodrag-dragged",A.add(v),c&&A.add(i),be&&($=L=((f=n.position)==null?void 0:f.x)??L,F=N=((y=n.position)==null?void 0:y.y)??N,Z())}}},pe=(e,t,r)=>Math.min(Math.max(e,t),r),re=e=>typeof e=="string",Ce=([e,t],r,a)=>{const l=(o,d)=>d===0?0:Math.ceil(o/d)*d;return[l(r,e),l(a,t)]},ge=(e,t)=>e.some(r=>t.some(a=>r.contains(a)));function ae(e,t){if(e===void 0)return;if(ie(e))return e.getBoundingClientRect();if(typeof e=="object"){const{top:a=0,left:l=0,right:o=0,bottom:d=0}=e;return{top:a,right:window.innerWidth-o,bottom:window.innerHeight-d,left:l}}if(e==="parent")return t.parentNode.getBoundingClientRect();const r=document.querySelector(e);if(r===null)throw new Error("The selector provided for bound doesn't exists in the document.");return r.getBoundingClientRect()}var X=(e,t,r)=>e.style.setProperty(t,r),ie=e=>e instanceof HTMLElement;function Y(e){return e==null||typeof e=="string"||e instanceof HTMLElement?e:"current"in e?e.current:Array.isArray(e)?e.map(t=>t instanceof HTMLElement?t:t.current):void 0}function Re(e,t={}){const r=m.useRef(),[a,l]=m.useState(!1),[o,d]=m.useState();let{onDragStart:g,onDrag:B,onDragEnd:R,handle:S,cancel:x}=t,h=Y(S),O=Y(x);function p(u,i){d(u),i==null||i(u)}function b(u){l(!0),p(u,g)}function T(u){p(u,B)}function v(u){l(!1),p(u,R)}return m.useEffect(()=>{if(typeof window>"u")return;const u=e.current;if(!u)return;({onDragStart:g,onDrag:B,onDragEnd:R}=t);const{update:i,destroy:q}=Me(u,{...t,handle:h,cancel:O,onDragStart:b,onDrag:T,onDragEnd:v});return r.current=i,q},[]),m.useEffect(()=>{var u;(u=r.current)==null||u.call(r,{...t,handle:Y(S),cancel:Y(x),onDragStart:b,onDrag:T,onDragEnd:v})},[t]),{isDragging:a,dragState:o}}var xe=ye({defaultClassName:"r95_1txblt60",variantClassNames:{active:{true:"r95_1txblt61"}},defaultVariants:{},compoundVariants:[]}),Ae="r95_1txblt62",De="r95_1txblt63",Se="r95_1txblt64",Oe=ye({defaultClassName:"r95_1txblt65",variantClassNames:{active:{true:"r95_1txblt66"}},defaultVariants:{},compoundVariants:[]}),Le=typeof U=="object"&&U&&U.Object===Object&&U,Ne=typeof self=="object"&&self&&self.Object===Object&&self;Le||Ne||Function("return this")();var je=typeof window<"u"?m.useLayoutEffect:m.useEffect;function ke(e,t,r,a){const l=m.useRef(t);je(()=>{l.current=t},[t]),m.useEffect(()=>{const o=(r==null?void 0:r.current)??window;if(!(o&&o.addEventListener))return;const d=g=>{l.current(g)};return o.addEventListener(e,d,a),()=>{o.removeEventListener(e,d,a)}},[e,r,a])}function qe(e,t,r="mousedown",a={}){ke(r,l=>{const o=l.target;if(!o||!o.isConnected)return;(Array.isArray(e)?e.filter(g=>!!g.current).every(g=>g.current&&!g.current.contains(o)):e.current&&!e.current.contains(o))&&t(l)},void 0,a)}class Ve{constructor(){this.listeners={}}on(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r)}off(t,r){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(a=>a!==r))}emit(t,r){this.listeners[t]&&this.listeners[t].forEach(a=>a(r))}}var k=(e=>(e.AddModal="add-modal",e.RemoveModal="remove-modal",e.ModalVisibilityChanged="modal-visibility-changed",e))(k||{});const z=new Ve,_e=he((e,t)=>D.createElement(oe,{...e,ref:t,className:ve(De,e.className)})),He=({hasWindowButton:e=!0,buttons:t=[],buttonsAlignment:r="flex-end",children:a,icon:l,menu:o=[],title:d,dragOptions:g,titleBarOptions:B,className:R,...S},x)=>{const[h]=m.useState(Te()),[O,p]=m.useState(""),[b,T]=m.useState(!1),v=m.useRef(null);Re(v,{...g,handle:".draggable"});const u=m.useRef(null);return qe(u,()=>{p("")}),m.useEffect(()=>(z.emit(k.AddModal,{icon:l,title:d,id:h,hasButton:e}),z.on(k.ModalVisibilityChanged,({id:i})=>{T(i===h)}),z.emit(k.ModalVisibilityChanged,{id:h}),()=>{z.emit(k.RemoveModal,{id:h})}),[]),m.useImperativeHandle(x,()=>v.current),D.createElement(oe,{...S,className:ve(xe({active:b}),R),ref:v,onMouseDown:()=>{z.emit(k.ModalVisibilityChanged,{id:h})}},D.createElement(me,{active:b,icon:l,title:d,className:"draggable"},B&&D.createElement(me.OptionsBox,null,B)),o&&o.length>0&&D.createElement("ul",{className:Se,ref:u},o.map(({name:i,list:q})=>{const I=O===i;return D.createElement("li",{key:i,onMouseDown:()=>p(i),className:Oe({active:I})},i,I&&q)})),a,t&&t.length>0&&D.createElement(oe,{className:Ae,justifyContent:r},t.map(i=>D.createElement(Be,{key:i.value,onClick:i.onClick,value:i.value},i.value))))},ze=Object.assign(he(He),{Content:_e});ze.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{buttons:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
  onClick(event: MouseEvent): void;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"onClick",value:{name:"void",required:!0}}]}}],raw:"Array<ModalButtons>"},description:"",defaultValue:{value:"[]",computed:!1}},menu:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  name: string;
  list: ReactElement<typeof List>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"list",value:{name:"ReactElement",elements:[{name:"List"}],raw:"ReactElement<typeof List>",required:!0}}]}}],raw:"Array<ModalMenu>"},description:"",defaultValue:{value:"[]",computed:!1}},dragOptions:{required:!1,tsType:{name:"Omit",elements:[{name:"DragOptions"},{name:"literal",value:"'handle'"}],raw:"Omit<DragOptions, 'handle'>"},description:""},hasWindowButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},buttonsAlignment:{required:!1,tsType:{name:"intersection['justifyContent']",raw:"FrameProps<'div'>['justifyContent']"},description:"",defaultValue:{value:"'flex-end'",computed:!1}},titleBarOptions:{required:!1,tsType:{name:"union",raw:`| ReactElement<TitleBarOptions>
| ReactElement<TitleBarOptions>[]`,elements:[{name:"ReactElement",elements:[{name:"union",raw:`| typeof TitleBar.Close
| typeof TitleBar.Help
| typeof TitleBar.Maximize
| typeof TitleBar.Minimize
| typeof TitleBar.Restore`,elements:[{name:"TitleBar.Close"},{name:"TitleBar.Help"},{name:"TitleBar.Maximize"},{name:"TitleBar.Minimize"},{name:"TitleBar.Restore"}]}],raw:"ReactElement<TitleBarOptions>"},{name:"Array",elements:[{name:"ReactElement",elements:[{name:"union",raw:`| typeof TitleBar.Close
| typeof TitleBar.Help
| typeof TitleBar.Maximize
| typeof TitleBar.Minimize
| typeof TitleBar.Restore`,elements:[{name:"TitleBar.Close"},{name:"TitleBar.Help"},{name:"TitleBar.Maximize"},{name:"TitleBar.Minimize"},{name:"TitleBar.Restore"}]}],raw:"ReactElement<TitleBarOptions>"}],raw:"ReactElement<TitleBarOptions>[]"}]},description:""}}};export{ze as M,k as a,z as m};
