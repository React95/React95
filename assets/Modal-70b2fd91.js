import{r as o,R as V}from"./index-9fa1aa67.js";import{B as Ce}from"./Button-e77e23f5.js";import{f as de,F as oe}from"./Frame-d1abb87e.js";import{T as se}from"./TitleBar-cd22ff01.js";/* empty css                             */import{c as be}from"./createRuntimeFn-62c9670f.esm-edc6fb2c.js";import{c as Me}from"./index-923230fa.js";import{a as Ee}from"./index-4fd03fd3.js";let Te=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var re={dragStart:!0},Be=(e,t={})=>{let r,i,{bounds:s,axis:f="both",gpuAcceleration:c=!0,legacyTranslate:a=!0,transform:g,applyUserSelectHack:B=!0,disabled:A=!1,ignoreMultitouch:q=!1,recomputeBounds:R=re,grid:h,position:y,cancel:x,handle:S,defaultClass:k="neodrag",defaultClassDragging:d="neodrag-dragging",defaultClassDragged:b="neodrag-dragged",defaultPosition:j={x:0,y:0},onDragStart:F,onDrag:I,onDragEnd:L}=t,_=!1,D=0,u=0,C=0,w=0,J=0,K=0,{x:P,y:U}=y?{x:(y==null?void 0:y.x)??0,y:(y==null?void 0:y.y)??0}:j;ee(P,U);let N,$,W,Q,ue,ce="",we=!!y;R={...re,...R};let X=new Set;const Z=document.body.style,H=e.classList;function ee(n=D,m=u){if(!g){if(a){let M=`${+n}px, ${+m}px`;return Y(e,"transform",c?`translate3d(${M}, 0)`:`translate(${M})`)}return Y(e,"translate",`${+n}px ${+m}px ${c?"1px":""}`)}const p=g({offsetX:n,offsetY:m,rootNode:e});ae(p)&&Y(e,"transform",p)}const te=(n,m)=>{const p={offsetX:D,offsetY:u,rootNode:e,currentNode:ue};e.dispatchEvent(new CustomEvent(n,{detail:p})),m==null||m(p)},ne=addEventListener;ne("pointerdown",fe,!1),ne("pointerup",pe,!1),ne("pointermove",ge,!1),Y(e,"touch-action","none");const me=()=>{let n=e.offsetWidth/$.width;return isNaN(n)&&(n=1),n};function fe(n){if(A||n.button===2)return;if(X.add(n.pointerId),q&&X.size>1)return n.preventDefault();if(R.dragStart&&(N=ie(s,e)),ae(S)&&ae(x)&&S===x)throw new Error("`handle` selector can't be same as `cancel` selector");if(H.add(k),W=function(l,T){if(!l)return[T];if(le(l))return[l];if(Array.isArray(l))return l;const O=T.querySelectorAll(l);if(O===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(O.values())}(S,e),Q=function(l,T){if(!l)return[];if(le(l))return[l];if(Array.isArray(l))return l;const O=T.querySelectorAll(l);if(O===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(O.values())}(x,e),r=/(both|x)/.test(f),i=/(both|y)/.test(f),ye(Q,W))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const m=n.composedPath()[0];if(!W.some(l=>{var T;return l.contains(m)||((T=l.shadowRoot)==null?void 0:T.contains(m))})||ye(Q,[m]))return;ue=W.length===1?e:W.find(l=>l.contains(m)),_=!0,$=e.getBoundingClientRect(),B&&(ce=Z.userSelect,Z.userSelect="none"),te("neodrag:start",F);const{clientX:p,clientY:M}=n,E=me();r&&(C=p-P/E),i&&(w=M-U/E),N&&(J=p-$.left,K=M-$.top)}function pe(n){X.delete(n.pointerId),_&&(R.dragEnd&&(N=ie(s,e)),H.remove(d),H.add(b),B&&(Z.userSelect=ce),te("neodrag:end",L),r&&(C=D),i&&(w=u),_=!1)}function ge(n){if(!_||q&&X.size>1)return;R.drag&&(N=ie(s,e)),H.add(d),n.preventDefault(),$=e.getBoundingClientRect();let m=n.clientX,p=n.clientY;const M=me();if(N){const E={left:N.left+J,top:N.top+K,right:N.right+J-$.width,bottom:N.bottom+K-$.height};m=he(m,E.left,E.right),p=he(p,E.top,E.bottom)}if(Array.isArray(h)){let[E,l]=h;if(isNaN(+E)||E<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+l)||l<0)throw new Error("2nd argument of `grid` must be a valid positive number");let T=m-C,O=p-w;[T,O]=Re([E/M,l/M],T,O),m=C+T,p=w+O}r&&(D=Math.round((m-C)*M)),i&&(u=Math.round((p-w)*M)),P=D,U=u,te("neodrag",I),ee()}return{destroy:()=>{const n=removeEventListener;n("pointerdown",fe,!1),n("pointerup",pe,!1),n("pointermove",ge,!1)},update:n=>{var p,M;f=n.axis||"both",A=n.disabled??!1,q=n.ignoreMultitouch??!1,S=n.handle,s=n.bounds,R=n.recomputeBounds??re,x=n.cancel,B=n.applyUserSelectHack??!0,h=n.grid,c=n.gpuAcceleration??!0,a=n.legacyTranslate??!0,g=n.transform;const m=H.contains(b);H.remove(k,b),k=n.defaultClass??"neodrag",d=n.defaultClassDragging??"neodrag-dragging",b=n.defaultClassDragged??"neodrag-dragged",H.add(k),m&&H.add(b),we&&(P=D=((p=n.position)==null?void 0:p.x)??D,U=u=((M=n.position)==null?void 0:M.y)??u,ee())}}},he=(e,t,r)=>Math.min(Math.max(e,t),r),ae=e=>typeof e=="string",Re=([e,t],r,i)=>{const s=(f,c)=>c===0?0:Math.ceil(f/c)*c;return[s(r,e),s(i,t)]},ye=(e,t)=>e.some(r=>t.some(i=>r.contains(i)));function ie(e,t){if(e===void 0)return;if(le(e))return e.getBoundingClientRect();if(typeof e=="object"){const{top:i=0,left:s=0,right:f=0,bottom:c=0}=e;return{top:i,right:window.innerWidth-f,bottom:window.innerHeight-c,left:s}}if(e==="parent")return t.parentNode.getBoundingClientRect();const r=document.querySelector(e);if(r===null)throw new Error("The selector provided for bound doesn't exists in the document.");return r.getBoundingClientRect()}var Y=(e,t,r)=>e.style.setProperty(t,r),le=e=>e instanceof HTMLElement;function G(e){return e==null||typeof e=="string"||e instanceof HTMLElement?e:"current"in e?e.current:Array.isArray(e)?e.map(t=>t instanceof HTMLElement?t:t.current):void 0}function xe(e,t={}){const r=o.useRef(),[i,s]=o.useState(!1),[f,c]=o.useState();let{onDragStart:a,onDrag:g,onDragEnd:B,handle:A,cancel:q}=t,R=G(A),h=G(q);function y(d,b){c(d),b==null||b(d)}function x(d){s(!0),y(d,a)}function S(d){y(d,g)}function k(d){s(!1),y(d,B)}return o.useEffect(()=>{if(typeof window>"u")return;const d=e.current;if(!d)return;({onDragStart:a,onDrag:g,onDragEnd:B}=t);const{update:b,destroy:j}=Be(d,{...t,handle:R,cancel:h,onDragStart:x,onDrag:S,onDragEnd:k});return r.current=b,j},[]),o.useEffect(()=>{var d;(d=r.current)==null||d.call(r,{...t,handle:G(A),cancel:G(q),onDragStart:x,onDrag:S,onDragEnd:k})},[t]),{isDragging:i,dragState:f}}var Se=be({defaultClassName:"r95_1txblt60",variantClassNames:{active:{true:"r95_1txblt61"},minimized:{true:"r95_1txblt62",false:"r95_1txblt63"}},defaultVariants:{},compoundVariants:[]}),De="r95_1txblt64",ze="r95_1txblt65",Ae="r95_1txblt66",ke=be({defaultClassName:"r95_1txblt67",variantClassNames:{active:{true:"r95_1txblt68"}},defaultVariants:{},compoundVariants:[]});class Ne{constructor(){this.listeners={}}on(t,r){var i;this.listeners[t]||(this.listeners[t]=[]),(i=this.listeners[t])==null||i.push(r)}off(t,r){var i;this.listeners[t]&&(this.listeners[t]=(i=this.listeners[t])==null?void 0:i.filter(s=>s!==r))}emit(t,r){var i;this.listeners[t]&&((i=this.listeners[t])==null||i.forEach(s=>{try{s(r)}catch(f){console.error(`Error in event listener for ${t}:`,f)}}))}}var v=(e=>(e.AddModal="add-modal",e.RemoveModal="remove-modal",e.ModalVisibilityChanged="modal-visibility-changed",e.MinimizeModal="minimize-modal",e.RestoreModal="restore-modal",e.FocusModal="focus-modal",e))(v||{});const z=new Ne,ve=()=>{const e=o.useCallback(a=>{z.emit(v.AddModal,a)},[]),t=o.useCallback(a=>{z.emit(v.RemoveModal,{id:a})},[]),r=o.useCallback(a=>{z.emit(v.MinimizeModal,{id:a})},[]),i=o.useCallback(a=>{z.emit(v.RestoreModal,{id:a})},[]),s=o.useCallback(a=>{z.emit(v.ModalVisibilityChanged,{id:a})},[]),f=o.useCallback((a,g)=>{g?z.emit(v.MinimizeModal,{id:a}):(z.emit(v.RestoreModal,{id:a}),z.emit(v.ModalVisibilityChanged,{id:a}))},[]),c=o.useCallback((a,g)=>(z.on(a,g),()=>z.off(a,g)),[]);return{add:e,remove:t,minimize:r,restore:i,focus:s,toggle:f,subscribe:c}},Oe=de((e,t)=>V.createElement(oe,{...e,ref:t,className:Me(ze,e.className)})),Ve=de((e,t)=>{const[r,i]=o.useState(""),{minimize:s,focus:f,subscribe:c}=ve();o.useEffect(()=>{const g=({id:A})=>{i(A)};return c(v.ModalVisibilityChanged,g)},[c]);const a=()=>{s(r),f("no-id")};return V.createElement(se.Minimize,{...e,ref:t,onClick:a})}),qe=({id:e,hasWindowButton:t=!0,buttons:r=[],buttonsAlignment:i="flex-end",children:s,icon:f,menu:c=[],title:a,dragOptions:g,titleBarOptions:B,className:A,...q},R)=>{const[h]=o.useState(e||Te()),[y,x]=o.useState(""),[S,k]=o.useState(!1),[d,b]=o.useState(!1),{add:j,remove:F,focus:I,subscribe:L}=ve(),_=o.useRef(null);xe(_,{...g,handle:".draggable"});const D=o.useRef(null);return Ee(D,()=>{x("")}),o.useEffect(()=>{j({icon:f,title:a||"",id:h,hasButton:t});const u=L(v.ModalVisibilityChanged,({id:C})=>{k(C===h)});return I(h),()=>{F(h),u()}},[h,f,a,t,e,j,F,I,L]),o.useEffect(()=>{const u=L(v.MinimizeModal,({id:w})=>{w===h&&b(!0)}),C=L(v.RestoreModal,({id:w})=>{w===h&&b(!1)});return()=>{u(),C()}},[h,L]),o.useImperativeHandle(R,()=>_.current),V.createElement(oe,{...q,className:Me(Se({active:S,minimized:d}),A),role:"dialog","aria-hidden":d,ref:_,onMouseDown:()=>{I(h)}},V.createElement(se,{active:S,icon:f,title:a,className:"draggable",mb:"$2"},B&&V.createElement(se.OptionsBox,null,B)),c&&c.length>0&&V.createElement("ul",{className:Ae,ref:D},c.map(({name:u,list:C})=>{const w=y===u;return V.createElement("li",{key:u,onMouseDown:()=>x(u),className:ke({active:w})},u,w&&C)})),s,r&&r.length>0&&V.createElement(oe,{className:De,justifyContent:i},r.map(u=>V.createElement(Ce,{key:u.value,onClick:u.onClick,value:u.value},u.value))))},_e=Object.assign(de(qe),{Content:Oe,Minimize:Ve});_e.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{id:{required:!1,tsType:{name:"string"},description:""},buttons:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
  onClick(event: MouseEvent): void;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"onClick",value:{name:"void",required:!0}}]}}],raw:"Array<ModalButtons>"},description:"",defaultValue:{value:"[]",computed:!1}},menu:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  name: string;
  list: ReactElement<typeof List>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"list",value:{name:"ReactElement",elements:[{name:"List"}],raw:"ReactElement<typeof List>",required:!0}}]}}],raw:"Array<ModalMenu>"},description:"",defaultValue:{value:"[]",computed:!1}},dragOptions:{required:!1,tsType:{name:"Omit",elements:[{name:"DragOptions"},{name:"literal",value:"'handle'"}],raw:"Omit<DragOptions, 'handle'>"},description:""},hasWindowButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},buttonsAlignment:{required:!1,tsType:{name:"intersection['justifyContent']",raw:"FrameProps<'div'>['justifyContent']"},description:"",defaultValue:{value:"'flex-end'",computed:!1}},titleBarOptions:{required:!1,tsType:{name:"union",raw:`| ReactElement<TitleBarOptions>
| ReactElement<TitleBarOptions>[]`,elements:[{name:"ReactElement",elements:[{name:"union",raw:`| typeof TitleBar.Close
| typeof TitleBar.Help
| typeof TitleBar.Maximize
| typeof TitleBar.Minimize
| typeof TitleBar.Restore`,elements:[{name:"TitleBar.Close"},{name:"TitleBar.Help"},{name:"TitleBar.Maximize"},{name:"TitleBar.Minimize"},{name:"TitleBar.Restore"}]}],raw:"ReactElement<TitleBarOptions>"},{name:"Array",elements:[{name:"ReactElement",elements:[{name:"union",raw:`| typeof TitleBar.Close
| typeof TitleBar.Help
| typeof TitleBar.Maximize
| typeof TitleBar.Minimize
| typeof TitleBar.Restore`,elements:[{name:"TitleBar.Close"},{name:"TitleBar.Help"},{name:"TitleBar.Maximize"},{name:"TitleBar.Minimize"},{name:"TitleBar.Restore"}]}],raw:"ReactElement<TitleBarOptions>"}],raw:"ReactElement<TitleBarOptions>[]"}]},description:""}}};export{_e as M,v as a,ve as u};
