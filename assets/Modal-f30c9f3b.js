import{r as c,c as X,R as A}from"./index-9fa1aa67.js";import{B as Ee}from"./Button-9c3a5d19.js";import{f as ue,F as se}from"./Frame-8a2a37ef.js";import{T as le}from"./TitleBar-83565a4b.js";import{c as Me}from"./createRuntimeFn-62c9670f.esm-edc6fb2c.js";import{c as we}from"./index-923230fa.js";let Ce=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var ae={dragStart:!0},Be=(e,t={})=>{let n,a,{bounds:o,axis:i="both",gpuAcceleration:d=!0,legacyTranslate:y=!0,transform:T,applyUserSelectHack:D=!0,disabled:V=!1,ignoreMultitouch:z=!1,recomputeBounds:f=ae,grid:L,position:g,cancel:C,handle:R,defaultClass:B="neodrag",defaultClassDragging:l="neodrag-dragging",defaultClassDragged:h="neodrag-dragged",defaultPosition:k={x:0,y:0},onDragStart:m,onDrag:J,onDragEnd:W}=t,$=!1,N=0,_=0,q=0,H=0,K=0,Q=0,{x:F,y:P}=g?{x:(g==null?void 0:g.x)??0,y:(g==null?void 0:g.y)??0}:k;te(F,P);let x,j,I,Z,ce,fe="",be=!!g;f={...ae,...f};let U=new Set;const ee=document.body.style,O=e.classList;function te(r=N,u=_){if(!T){if(y){let M=`${+r}px, ${+u}px`;return Y(e,"transform",d?`translate3d(${M}, 0)`:`translate(${M})`)}return Y(e,"translate",`${+r}px ${+u}px ${d?"1px":""}`)}const p=T({offsetX:r,offsetY:u,rootNode:e});ie(p)&&Y(e,"transform",p)}const ne=(r,u)=>{const p={offsetX:N,offsetY:_,rootNode:e,currentNode:ce};e.dispatchEvent(new CustomEvent(r,{detail:p})),u==null||u(p)},re=addEventListener;re("pointerdown",pe,!1),re("pointerup",ge,!1),re("pointermove",he,!1),Y(e,"touch-action","none");const me=()=>{let r=e.offsetWidth/j.width;return isNaN(r)&&(r=1),r};function pe(r){if(V||r.button===2)return;if(U.add(r.pointerId),z&&U.size>1)return r.preventDefault();if(f.dragStart&&(x=oe(o,e)),ie(R)&&ie(C)&&R===C)throw new Error("`handle` selector can't be same as `cancel` selector");if(O.add(B),I=function(s,E){if(!s)return[E];if(de(s))return[s];if(Array.isArray(s))return s;const S=E.querySelectorAll(s);if(S===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(S.values())}(R,e),Z=function(s,E){if(!s)return[];if(de(s))return[s];if(Array.isArray(s))return s;const S=E.querySelectorAll(s);if(S===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(S.values())}(C,e),n=/(both|x)/.test(i),a=/(both|y)/.test(i),ve(Z,I))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const u=r.composedPath()[0];if(!I.some(s=>{var E;return s.contains(u)||((E=s.shadowRoot)==null?void 0:E.contains(u))})||ve(Z,[u]))return;ce=I.length===1?e:I.find(s=>s.contains(u)),$=!0,j=e.getBoundingClientRect(),D&&(fe=ee.userSelect,ee.userSelect="none"),ne("neodrag:start",m);const{clientX:p,clientY:M}=r,b=me();n&&(q=p-F/b),a&&(H=M-P/b),x&&(K=p-j.left,Q=M-j.top)}function ge(r){U.delete(r.pointerId),$&&(f.dragEnd&&(x=oe(o,e)),O.remove(l),O.add(h),D&&(ee.userSelect=fe),ne("neodrag:end",W),n&&(q=N),a&&(H=_),$=!1)}function he(r){if(!$||z&&U.size>1)return;f.drag&&(x=oe(o,e)),O.add(l),r.preventDefault(),j=e.getBoundingClientRect();let u=r.clientX,p=r.clientY;const M=me();if(x){const b={left:x.left+K,top:x.top+Q,right:x.right+K-j.width,bottom:x.bottom+Q-j.height};u=ye(u,b.left,b.right),p=ye(p,b.top,b.bottom)}if(Array.isArray(L)){let[b,s]=L;if(isNaN(+b)||b<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+s)||s<0)throw new Error("2nd argument of `grid` must be a valid positive number");let E=u-q,S=p-H;[E,S]=Te([b/M,s/M],E,S),u=q+E,p=H+S}n&&(N=Math.round((u-q)*M)),a&&(_=Math.round((p-H)*M)),F=N,P=_,ne("neodrag",J),te()}return{destroy:()=>{const r=removeEventListener;r("pointerdown",pe,!1),r("pointerup",ge,!1),r("pointermove",he,!1)},update:r=>{var p,M;i=r.axis||"both",V=r.disabled??!1,z=r.ignoreMultitouch??!1,R=r.handle,o=r.bounds,f=r.recomputeBounds??ae,C=r.cancel,D=r.applyUserSelectHack??!0,L=r.grid,d=r.gpuAcceleration??!0,y=r.legacyTranslate??!0,T=r.transform;const u=O.contains(h);O.remove(B,h),B=r.defaultClass??"neodrag",l=r.defaultClassDragging??"neodrag-dragging",h=r.defaultClassDragged??"neodrag-dragged",O.add(B),u&&O.add(h),be&&(F=N=((p=r.position)==null?void 0:p.x)??N,P=_=((M=r.position)==null?void 0:M.y)??_,te())}}},ye=(e,t,n)=>Math.min(Math.max(e,t),n),ie=e=>typeof e=="string",Te=([e,t],n,a)=>{const o=(i,d)=>d===0?0:Math.ceil(i/d)*d;return[o(n,e),o(a,t)]},ve=(e,t)=>e.some(n=>t.some(a=>n.contains(a)));function oe(e,t){if(e===void 0)return;if(de(e))return e.getBoundingClientRect();if(typeof e=="object"){const{top:a=0,left:o=0,right:i=0,bottom:d=0}=e;return{top:a,right:window.innerWidth-i,bottom:window.innerHeight-d,left:o}}if(e==="parent")return t.parentNode.getBoundingClientRect();const n=document.querySelector(e);if(n===null)throw new Error("The selector provided for bound doesn't exists in the document.");return n.getBoundingClientRect()}var Y=(e,t,n)=>e.style.setProperty(t,n),de=e=>e instanceof HTMLElement;function G(e){return e==null||typeof e=="string"||e instanceof HTMLElement?e:"current"in e?e.current:Array.isArray(e)?e.map(t=>t instanceof HTMLElement?t:t.current):void 0}function Re(e,t={}){const n=c.useRef(),[a,o]=c.useState(!1),[i,d]=c.useState();let{onDragStart:y,onDrag:T,onDragEnd:D,handle:V,cancel:z}=t,f=G(V),L=G(z);function g(l,h){d(l),h==null||h(l)}function C(l){o(!0),g(l,y)}function R(l){g(l,T)}function B(l){o(!1),g(l,D)}return c.useEffect(()=>{if(typeof window>"u")return;const l=e.current;if(!l)return;({onDragStart:y,onDrag:T,onDragEnd:D}=t);const{update:h,destroy:k}=Be(l,{...t,handle:f,cancel:L,onDragStart:C,onDrag:R,onDragEnd:B});return n.current=h,k},[]),c.useEffect(()=>{var l;(l=n.current)==null||l.call(n,{...t,handle:G(V),cancel:G(z),onDragStart:C,onDrag:R,onDragEnd:B})},[t]),{isDragging:a,dragState:i}}var xe=Me({defaultClassName:"r95_1txblt60",variantClassNames:{active:{true:"r95_1txblt61"},minimized:{true:"r95_1txblt62",false:"r95_1txblt63"}},defaultVariants:{},compoundVariants:[]}),Se="r95_1txblt64",Ae="r95_1txblt65",De="r95_1txblt66",ze=Me({defaultClassName:"r95_1txblt67",variantClassNames:{active:{true:"r95_1txblt68"}},defaultVariants:{},compoundVariants:[]}),Oe=typeof X=="object"&&X&&X.Object===Object&&X,Ve=typeof self=="object"&&self&&self.Object===Object&&self;Oe||Ve||Function("return this")();var Le=typeof window<"u"?c.useLayoutEffect:c.useEffect;function Ne(e,t,n,a){const o=c.useRef(t);Le(()=>{o.current=t},[t]),c.useEffect(()=>{const i=(n==null?void 0:n.current)??window;if(!(i&&i.addEventListener))return;const d=y=>{o.current(y)};return i.addEventListener(e,d,a),()=>{i.removeEventListener(e,d,a)}},[e,n,a])}function _e(e,t,n="mousedown",a={}){Ne(n,o=>{const i=o.target;if(!i||!i.isConnected)return;(Array.isArray(e)?e.filter(y=>!!y.current).every(y=>y.current&&!y.current.contains(i)):e.current&&!e.current.contains(i))&&t(o)},void 0,a)}class je{constructor(){this.listeners={}}on(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n)}off(t,n){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(a=>a!==n))}emit(t,n){this.listeners[t]&&this.listeners[t].forEach(a=>a(n))}}var v=(e=>(e.AddModal="add-modal",e.RemoveModal="remove-modal",e.ModalVisibilityChanged="modal-visibility-changed",e.MinimizeModal="minimize-modal",e.RestoreModal="restore-modal",e))(v||{});const w=new je,ke=ue((e,t)=>A.createElement(se,{...e,ref:t,className:we(Ae,e.className)})),qe=ue((e,t)=>{const[n,a]=c.useState("");c.useEffect(()=>{const i=({id:d})=>{a(d)};return w.on(v.ModalVisibilityChanged,i),()=>{w.off(v.ModalVisibilityChanged,i)}},[]);const o=()=>{w.emit(v.MinimizeModal,{id:n}),w.emit(v.ModalVisibilityChanged,{id:"no id"})};return A.createElement(le.Minimize,{...e,ref:t,onClick:o})}),He=({hasWindowButton:e=!0,buttons:t=[],buttonsAlignment:n="flex-end",children:a,icon:o,menu:i=[],title:d,dragOptions:y,titleBarOptions:T,className:D,...V},z)=>{const[f]=c.useState(Ce()),[L,g]=c.useState(""),[C,R]=c.useState(!1),[B,l]=c.useState(!1),h=c.useRef(null);Re(h,{...y,handle:".draggable"});const k=c.useRef(null);return _e(k,()=>{g("")}),c.useEffect(()=>(w.emit(v.AddModal,{icon:o,title:d,id:f,hasButton:e}),w.on(v.ModalVisibilityChanged,({id:m})=>{R(m===f)}),w.emit(v.ModalVisibilityChanged,{id:f}),()=>{w.emit(v.RemoveModal,{id:f})}),[]),c.useEffect(()=>(w.on(v.MinimizeModal,({id:m})=>{m===f&&l(!0)}),w.on(v.RestoreModal,({id:m})=>{m===f&&l(!1)}),()=>{w.off(v.MinimizeModal,()=>{}),w.off(v.RestoreModal,()=>{})}),[f]),c.useImperativeHandle(z,()=>h.current),A.createElement(se,{...V,className:we(xe({active:C,minimized:B}),D),role:"dialog","aria-hidden":B,ref:h,onMouseDown:()=>{w.emit(v.ModalVisibilityChanged,{id:f})}},A.createElement(le,{active:C,icon:o,title:d,className:"draggable"},T&&A.createElement(le.OptionsBox,null,T)),i&&i.length>0&&A.createElement("ul",{className:De,ref:k},i.map(({name:m,list:J})=>{const W=L===m;return A.createElement("li",{key:m,onMouseDown:()=>g(m),className:ze({active:W})},m,W&&J)})),a,t&&t.length>0&&A.createElement(se,{className:Se,justifyContent:n},t.map(m=>A.createElement(Ee,{key:m.value,onClick:m.onClick,value:m.value},m.value))))},Ie=Object.assign(ue(He),{Content:ke,Minimize:qe});Ie.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{buttons:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string;
  onClick(event: MouseEvent): void;
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"onClick",value:{name:"void",required:!0}}]}}],raw:"Array<ModalButtons>"},description:"",defaultValue:{value:"[]",computed:!1}},menu:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  name: string;
  list: ReactElement<typeof List>;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"list",value:{name:"ReactElement",elements:[{name:"List"}],raw:"ReactElement<typeof List>",required:!0}}]}}],raw:"Array<ModalMenu>"},description:"",defaultValue:{value:"[]",computed:!1}},dragOptions:{required:!1,tsType:{name:"Omit",elements:[{name:"DragOptions"},{name:"literal",value:"'handle'"}],raw:"Omit<DragOptions, 'handle'>"},description:""},hasWindowButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},buttonsAlignment:{required:!1,tsType:{name:"intersection['justifyContent']",raw:"FrameProps<'div'>['justifyContent']"},description:"",defaultValue:{value:"'flex-end'",computed:!1}},titleBarOptions:{required:!1,tsType:{name:"union",raw:`| ReactElement<TitleBarOptions>
| ReactElement<TitleBarOptions>[]`,elements:[{name:"ReactElement",elements:[{name:"union",raw:`| typeof TitleBar.Close
| typeof TitleBar.Help
| typeof TitleBar.Maximize
| typeof TitleBar.Minimize
| typeof TitleBar.Restore`,elements:[{name:"TitleBar.Close"},{name:"TitleBar.Help"},{name:"TitleBar.Maximize"},{name:"TitleBar.Minimize"},{name:"TitleBar.Restore"}]}],raw:"ReactElement<TitleBarOptions>"},{name:"Array",elements:[{name:"ReactElement",elements:[{name:"union",raw:`| typeof TitleBar.Close
| typeof TitleBar.Help
| typeof TitleBar.Maximize
| typeof TitleBar.Minimize
| typeof TitleBar.Restore`,elements:[{name:"TitleBar.Close"},{name:"TitleBar.Help"},{name:"TitleBar.Maximize"},{name:"TitleBar.Minimize"},{name:"TitleBar.Restore"}]}],raw:"ReactElement<TitleBarOptions>"}],raw:"ReactElement<TitleBarOptions>[]"}]},description:""}}};export{Ie as M,v as a,w as m};
