{"version":3,"file":"tree.stories-1f608192.js","sources":["../../components/Tree/imgs/tree-mid.png","../../components/Tree/imgs/tree-last.png","../../components/Tree/imgs/tree-node-children.png","../../components/Tree/Node.tsx","../../components/Tree/Tree.tsx"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAUCAYAAADskT9PAAAAKUlEQVR42mNgGITgP8NIB6MhMBoCoyHwn070aBoYDYHREBgNgdEQAAMAX+QV66ALHKgAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAUCAYAAADskT9PAAAAJUlEQVR42mNgGITgP8NIB6MhMBoCoyHwn070KBgFo2AUjAIwAAA2ZRDwnJ3nLQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAUCAYAAADskT9PAAAAJ0lEQVR42mNgGITgP8NIB6MhMBoCoyEwGgKjITAaAqMhMBoCdA0BAHdXCfcDKEZUAAAAAElFTkSuQmCC\"","import * as React from 'react';\nimport styled from '@xstyled/styled-components';\n\nimport treeMidLines from './imgs/tree-mid.png';\nimport treeLastLines from './imgs/tree-last.png';\nimport treeNodeChildrenLine from './imgs/tree-node-children.png';\nimport {\n  Bat,\n  BatExec,\n  FileFont2,\n  FilePen,\n  FileSettings,\n  FileText,\n  FileTextSettings,\n  Folder,\n  FolderOpen,\n  MediaCd,\n} from '@react95/icons';\n\nexport const icons = {\n  FILE_MEDIA: MediaCd,\n  FILE_TEXT: FileText,\n  FILE_UNKNOWN: Bat,\n  FILE_FONT: FileFont2,\n  FILE_PEN: FilePen,\n  FILE_SETTINGS: FileSettings,\n  FILE_TEXT_SETTINGS: FileTextSettings,\n  FILE_EXECUTABLE: BatExec,\n} as const;\n\nconst NodeItem = styled.div<{ isOpen: boolean }>`\n  list-style-type: none;\n  background-repeat: no-repeat;\n  background-image: url(${treeMidLines});\n\n  &:last-child {\n    background-image: url(${({ isOpen }) =>\n      isOpen ? treeMidLines : treeLastLines});\n  }\n`;\n\nconst NodeInfo = styled.div`\n  display: flex;\n  align-items: center;\n  user-select: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n`;\n\nconst FolderStatus = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 10px;\n  height: 10px;\n  border: 1;\n  border-color: borderDarkest;\n  background-color: inputBackground;\n  font-size: 11px;\n`;\n\nconst IconContainer = styled.div<{ hasChildren: boolean }>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n  margin-right: 6;\n  margin-left: ${({ hasChildren }) => (hasChildren ? 8 : 18)}px;\n\n  > img {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\nconst NodeChildren = styled.ul`\n  padding: 0 0 0 22;\n  background-image: url(${treeNodeChildrenLine});\n  background-repeat: repeat-y;\n`;\n\nconst Label = styled.span`\n  outline: none;\n  padding: 1;\n\n  :focus {\n    border-width: 1;\n    border-style: dotted;\n    padding: 0;\n  }\n`;\n\nconst NodeIcon: React.FC<{ hasChildren: boolean; isOpen: boolean }> = ({\n  hasChildren,\n  isOpen,\n}) => {\n  if (!hasChildren) {\n    return <Bat variant=\"32x32_4\" data-testid=\"react95-default-icon-bat\" />;\n  }\n\n  if (isOpen) {\n    return (\n      <FolderOpen\n        variant=\"32x32_4\"\n        data-testid=\"react95-default-icon-folder-open\"\n      />\n    );\n  }\n\n  return <Folder variant=\"32x32_4\" data-testid=\"react95-default-icon-folder\" />;\n};\n\nexport type NodeProps = {\n  label: string;\n  icon?: React.ReactElement;\n  id: number;\n  children?: Array<NodeProps>;\n  onClick?(\n    event: React.MouseEvent | React.KeyboardEvent,\n    props: NodeProps,\n  ): void;\n};\n\nconst Node: React.FC<NodeProps> = ({\n  children = [],\n  id,\n  icon,\n  label,\n  onClick = () => {},\n  ...rest\n}) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const hasChildren = children.length > 0;\n\n  const onClickHandler = (event: React.MouseEvent | React.KeyboardEvent) => {\n    onClick(event, {\n      id,\n      icon,\n      label,\n      children,\n    });\n  };\n\n  const onKeyDownHandler = (event: React.KeyboardEvent) => {\n    if (event.key === ' ') {\n      setIsOpen(!isOpen);\n      onClickHandler(event);\n    }\n  };\n\n  return (\n    <NodeItem isOpen={isOpen} {...rest}>\n      <NodeInfo>\n        {hasChildren && (\n          <FolderStatus onClick={() => setIsOpen(!isOpen)}>\n            {isOpen ? '-' : '+'}\n          </FolderStatus>\n        )}\n        <IconContainer hasChildren={hasChildren}>\n          {icon || <NodeIcon hasChildren={hasChildren} isOpen={isOpen} />}\n        </IconContainer>\n        <Label\n          tabIndex={0}\n          onDoubleClick={() => setIsOpen(!isOpen)}\n          onClick={onClickHandler}\n          onKeyDown={onKeyDownHandler}\n        >\n          {label}\n        </Label>\n      </NodeInfo>\n      {hasChildren && isOpen && (\n        <NodeChildren>\n          {children?.map(dataNode => (\n            <Node key={dataNode.id} {...dataNode} />\n          ))}\n        </NodeChildren>\n      )}\n    </NodeItem>\n  );\n};\n\nexport default Node;\n","import React, { forwardRef } from 'react';\nimport styled from 'styled-components';\nimport Node, { icons, NodeProps } from './Node';\n\nconst TreeParent = styled.ul`\n  padding: 0;\n`;\n\nexport type TreeProps = {\n  data: Array<NodeProps>;\n};\n\ntype TreeComposition = React.ForwardRefExoticComponent<\n  TreeProps & React.RefAttributes<HTMLUListElement>\n> & {\n  icons: typeof icons;\n};\n\nconst Tree = forwardRef<HTMLUListElement, TreeProps>(\n  ({ data, ...rest }, ref) => (\n    <TreeParent {...rest} ref={ref}>\n      {data.map(dataNode => (\n        <Node key={dataNode.id} {...dataNode} />\n      ))}\n    </TreeParent>\n  ),\n) as TreeComposition;\n\nTree.defaultProps = {\n  data: [],\n};\n\nTree.icons = icons;\n\nexport default Tree;\n"],"names":["treeMidLines","treeLastLines","treeNodeChildrenLine","icons","MediaCd","FileText","Bat","FileFont2","FilePen","FileSettings","FileTextSettings","BatExec","NodeItem","styled","isOpen","NodeInfo","FolderStatus","IconContainer","hasChildren","NodeChildren","Label","NodeIcon","jsx","FolderOpen","Folder","Node","children","id","icon","label","onClick","rest","setIsOpen","React.useState","onClickHandler","event","jsxs","dataNode","Node$1","TreeParent","Tree","forwardRef","data","ref","Tree$1"],"mappings":"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"}